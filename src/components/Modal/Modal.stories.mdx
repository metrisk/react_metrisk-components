import { Fragment, useContext, useState } from 'react'
import { Meta, Story, Canvas, Preview, Props } from '@storybook/addon-docs/blocks'
import { OpenContext, OpenProvider } from '../../context/OpenContext'
import { Text } from '../Text'
import { Button } from '../Button'
import { Modal } from '.'

<Meta title='Components/Modal' component={Modal} />

# Modal
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus lacinia turpis mattis justo pellentesque, ac vulputate felis dictum. Integer risus enim, posuere quis elementum non, commodo molestie odio.
 
## Base
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus lacinia turpis mattis justo pellentesque, ac vulputate felis dictum. Integer risus enim, posuere quis elementum non, commodo molestie odio.

<Preview>
  <Story name='Base'>
    {() => {
      const App = () => {
        const { open, setOpen } = useContext(OpenContext)
        return (
          <Fragment>
            <Button type={'Primary'} onClick={() => setOpen(true)}>Open Modal</Button>
            {open && (
              <Modal header={{ heading: 'Heading', subheading: 'Subheading'}}>
                <Text>Gaff heave to trysail measured fer yer chains reef sloop Plate Fleet gally scuppers wench. Boatswain Arr fore holystone hogshead Barbary Coast no prey, no pay carouser ho crow's nest. Gibbet scuppers execution dock topsail fluke crack Jennys tea cup sloop parley Arr hang the jib.
Jury mast belay log bucko ballast mutiny provost salmagundi Spanish Main nipperkin. Run a rig rum grog spike ho shrouds tender port draught black spot. Bilged on her anchor bounty Pirate Round jib barkadeer topsail plunder jolly boat Pieces of Eight spirits.
Case shot spirits galleon dead men tell no tales parrel gally list lee pressgang cutlass. Crack Jennys tea cup brigantine Jack Tar clipper hulk trysail nipperkin doubloon interloper Cat o'nine tails. Chase guns barque American Main black spot yo-ho-ho lookout execution dock rigging weigh anchor Chain Shot.
Gaff heave to trysail measured fer yer chains reef sloop Plate Fleet gally scuppers wench. Boatswain Arr fore holystone hogshead Barbary Coast no prey, no pay carouser ho crow's nest. Gibbet scuppers execution dock topsail fluke crack Jennys tea cup sloop parley Arr hang the jib.
Jury mast belay log bucko ballast mutiny provost salmagundi Spanish Main nipperkin. Run a rig rum grog spike ho shrouds tender port draught black spot. Bilged on her anchor bounty Pirate Round jib barkadeer topsail plunder jolly boat Pieces of Eight spirits.
Case shot spirits galleon dead men tell no tales parrel gally list lee pressgang cutlass. Crack Jennys tea cup brigantine Jack Tar clipper hulk trysail nipperkin doubloon interloper Cat o'nine tails. Chase guns barque American Main black spot yo-ho-ho lookout execution dock rigging weigh anchor Chain Shot.
Gaff heave to trysail measured fer yer chains reef sloop Plate Fleet gally scuppers wench. Boatswain Arr fore holystone hogshead Barbary Coast no prey, no pay carouser ho crow's nest. Gibbet scuppers execution dock topsail fluke crack Jennys tea cup sloop parley Arr hang the jib.
Jury mast belay log bucko ballast mutiny provost salmagundi Spanish Main nipperkin. Run a rig rum grog spike ho shrouds tender port draught black spot. Bilged on her anchor bounty Pirate Round jib barkadeer topsail plunder jolly boat Pieces of Eight spirits.
Case shot spirits galleon dead men tell no tales parrel gally list lee pressgang cutlass. Crack Jennys tea cup brigantine Jack Tar clipper hulk trysail nipperkin doubloon interloper Cat o'nine tails. Chase guns barque American Main black spot yo-ho-ho lookout execution dock rigging weigh anchor Chain Shot.</Text>
              </Modal>
            )}
          </Fragment>
        )
      }
      return (
        <OpenProvider>
          <App />
        </OpenProvider>
      )
    }}
  </Story>
</Preview>

## Actions
For use within paragraphs or other instances where a button would not be visually appropriate.

<Preview>
  <Story name='Actions'>
    {() => {
      const App = () => {
        const { open, setOpen } = useContext(OpenContext)
        return ( 
          <Fragment>
            <Button type={'Primary'} onClick={() => setOpen(true)}>Open Modal</Button>
            {open && (
              <Modal 
                header={{ heading: 'Heading', subheading: 'Subheading'}} 
                footer={{ 
                  actions: [
                    <Button key={'btn-close'} type={'Tertiary'} onClick={() => setOpen(false)}>Close</Button>,
                    <Button key={'btn-ok'} type={'Primary'} onClick={() => setOpen(false)}>OK</Button>,
                  ]
                }}>
                <Text>Lorem ipsum</Text>
              </Modal>
            )}
          </Fragment>
        )
      }
      return (
        <OpenProvider>
          <App />
        </OpenProvider>
      )
    }}
  </Story>
</Preview>

## Prop Types

<Props of={Modal} />